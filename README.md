# iCrypto MiniApp

iCrypto MiniApp is a web application that allows users to learn about cryptocurrencies and earn rewards in the form of ICR tokens. This project is built using Next.js, React, and integrates with blockchain technology.

## Author

Dewangga Praxindo

## Features

- User authentication with wallet connection
- Quest system for learning about cryptocurrencies
- Reward system with ICR tokens
- Leaderboard to track user progress
- Responsive design for various screen sizes
- Token rewards whitelist for partner collaborations

## Claiming Rewards Process

The iCrypto MiniApp implements a sophisticated Merkle tree-based system for efficient and secure reward distribution. This approach optimizes gas costs, enhances security, and ensures scalability. Here's a detailed overview of the technical process:

1. **Merkle Tree Generation**:

   - The process begins by collecting and processing user reward data from our database. This data includes each user's address, the current season ID, the token address for rewards (ICR in this case), and the amount of tokens earned.
   - For each user's reward data, we create a leaf in the Merkle tree. The leaf is generated by hashing the concatenated data (user address + season ID + token address + reward amount) using keccak256.
   - These leaves are then used to construct a Merkle tree. The Merkle tree is a binary tree where each non-leaf node is the hash of its two child nodes. The root of this tree, known as the Merkle root, represents a cryptographic fingerprint of the entire set of rewards for a given season.

   ![Merkle Tree Diagram](./images/merkle-tree-diagram.svg)
   _Figure 1: Visualization of a Merkle Tree structure used in the reward claiming process_

2. **Smart Contract Setup**:

   - The calculated Merkle root is stored in the `RewardDistController` smart contract on the blockchain.
   - This root serves as a compact, tamper-proof representation of all reward claims for a given season. Storing just this single hash instead of all individual reward data significantly reduces on-chain storage costs.

3. **Claim Verification**:

   - When a user initiates a claim for their reward, they must provide their claim data (address, season ID, token address, reward amount) along with a Merkle proof.
   - The Merkle proof is a set of hashes that, when combined with the user's leaf data in the correct order, will reproduce the Merkle root stored in the contract.
   - The smart contract uses this proof to verify the claim by reconstructing the path from the user's leaf to the root. If the calculated root matches the stored root, the claim is valid.
   - This verification process ensures that only pre-approved claims can be processed, without the need to store extensive data on-chain. It effectively prevents unauthorized claims or alterations to reward amounts.

4. **Reward Distribution**:
   - Once the claim is verified, the `RewardDistributor` contract processes the reward distribution.
   - The contract transfers the appropriate amount of ICR tokens from its balance to the user's address.
   - This transfer is executed as part of the same transaction as the verification, ensuring atomicity of the claim process.

## Token Rewards Whitelist

The iCrypto MiniApp implements a token rewards whitelist system, enabling collaboration with various partners and supporting multiple reward tokens. This feature enhances the platform's flexibility and allows for diverse reward structures. Here's an overview of how it works:

1. **Whitelist Management**:

   - The `RewardDistController` contract maintains a whitelist of approved token addresses.
   - Only whitelisted tokens can be used for rewards, ensuring control over the types of tokens distributed.
   - The contract owner can add, remove, or edit tokens in the whitelist, allowing for dynamic management of reward options.

2. **Partner Collaboration**:

   - This system allows iCrypto to collaborate with various partners, each potentially offering their own token as a reward.
   - Partners can integrate their tokens into the reward system, providing users with a wider range of incentives.

3. **Multi-Token Rewards**:

   - Users can potentially earn different types of tokens for completing quests or achieving milestones.
   - The Merkle tree system is designed to handle multiple token types, with each leaf containing the specific token address for the reward.

4. **Minimum Reward Amounts**:

   - Each whitelisted token can have a specified minimum reward amount.
   - This feature prevents dust accumulation and ensures that rewards are meaningful for users.

5. **Flexibility and Scalability**:

   - New partnerships can be easily integrated by adding their tokens to the whitelist.
   - The system can adapt to changing market conditions or partnership agreements without requiring significant contract modifications.

6. **Security and Control**:
   - Only whitelisted tokens can be distributed as rewards, preventing potential abuse or distribution of unauthorized tokens.
   - The contract owner maintains control over which tokens are accepted, ensuring the integrity of the reward system.

By implementing this token rewards whitelist, iCrypto MiniApp creates a flexible ecosystem that can adapt to various partnerships and reward structures. This feature not only enhances the user experience by potentially offering a variety of reward tokens but also positions the platform for scalable growth through strategic collaborations.

## Smart Contract Addresses

The iCrypto MiniApp utilizes the following smart contracts deployed on the Base Sepolia testnet:

1. **RewardDistController**:

   - Address: [0x6f01CbaFe6A920EB60A1BD3c7E81F51ec6216bD8](https://sepolia.basescan.org/address/0x6f01CbaFe6A920EB60A1BD3c7E81F51ec6216bD8)
   - This contract manages the whitelist of reward tokens and controls the reward distribution process.

2. **RewardDistributor**:

   - Address: [0x50F23827A5d1082a227C0f6C4813890Ee3553BEf](https://sepolia.basescan.org/address/0x50F23827A5d1082a227C0f6C4813890Ee3553BEf)
   - This contract handles the actual distribution of rewards to users based on their claims.

3. **iCrypto Token (ICR)**:
   - Address: [0x9742Ee81F7D6C0005FB4856660392FE618a941c0](https://sepolia.basescan.org/token/0x9742Ee81F7D6C0005FB4856660392FE618a941c0)
   - This is the ERC20 token used as the primary reward in the iCrypto MiniApp.

You can view more details about each contract, including transactions and contract code, by clicking on the respective links above.

## Getting Started

### Prerequisites

- Node.js (version 14 or later)
- npm or yarn

### Installation

1. Clone the repository:

   ```
   git clone https://github.com/your-username/icrypto-miniapp.git
   ```

2. Navigate to the project directory:

   ```
   cd icrypto-miniapp
   ```

3. Install dependencies:

   ```
   npm install
   ```

   or

   ```
   yarn install
   ```

4. Create a `.env.local` file in the root directory and add the necessary environment variables:

   ```
   NEXT_PUBLIC_CDP_API_KEY=your_cdp_api_key
   NEXT_PUBLIC_WC_PROJECT_ID=your_wallet_connect_project_id
   ```

5. Run the development server:

   ```
   npm run dev
   ```

   or

   ```
   yarn dev
   ```

6. Open [http://localhost:3000](http://localhost:3000) in your browser to see the application.

## Copyright

Â© 2024 iCrypto Media. All rights reserved.
